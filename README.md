# APIOrchestra-VTB
VTB API HACK APIOrchestra 
# ğŸ¦ APIOrchestra â€” ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğµ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ API-Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ¾Ğ² Ñ Ğ˜Ğ˜

> **Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹, Ğ° Ğ½Ğµ ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹. Ğ‘ĞµĞ· ĞºĞ¾Ğ´Ğ°. Ğ¡ Ğ˜Ğ˜. Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾.**

![APIOrchestra Demo](https://via.placeholder.com/800x400/1a1a2e/ffffff?text=APIOrchestra+Demo+Screenshot)

**ĞĞ²Ñ‚Ğ¾Ñ€**: Ğ”Ğ¼Ğ¸Ñ‚Ñ€Ğ¸Ğ¹ ĞšÑ€Ñ‹Ğ»Ğ¾ÑĞ¾Ğ², Ğ£Ñ„Ğ°, Ğ Ğ¾ÑÑĞ¸Ñ  
**Ğ¯Ğ·Ñ‹Ğº**: Java 17+ (Spring Boot), Python 3.x  
**Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸**: Spring Boot 3, Swagger Parser, Requests, Dataclasses  
**Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ**: MIT  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ**: Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾ Ğº Ğ·Ğ°Ğ¿ÑƒÑĞºÑƒ â€” Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° Ubuntu 20.04 Ñ Java 17 Ğ¸ Python 3.8+

---

## ğŸ’¡ ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°

Ğ¡Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ñ‹Ğµ ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ñ‹, Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğ°, Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ ÑÑ‡ĞµÑ‚Ğ¾Ğ²) â€” ÑÑ‚Ğ¾ **Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸ REST API**, Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ² Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹.  
ĞĞ¾ Ğ¸Ñ… Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¾ÑÑ‚Ğ°Ñ‘Ñ‚ÑÑ **Ñ€ÑƒÑ‡Ğ½Ñ‹Ğ¼, Ñ…Ñ€ÑƒĞ¿ĞºĞ¸Ğ¼ Ğ¸ Ğ½ĞµÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼**:

- Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸ĞºĞ¸ Ğ¿Ğ¸ÑˆÑƒÑ‚ ĞºĞ°ÑÑ‚Ğ¾Ğ¼Ğ½Ñ‹Ğµ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹ Ğ¿Ğ¾Ğ´ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¹.
- Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ğ° â€” ĞºÑ€Ğ°Ñ… Ğ²ÑĞµĞ¹ Ñ†ĞµĞ¿Ğ¾Ñ‡ĞºĞ¸.
- ĞĞµÑ‚ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ğ½Ğ¸Ñ: ĞºÑ‚Ğ¾ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ³Ğ¾, ĞºĞ°ĞºĞ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ĞµĞ´Ğ°ÑÑ‚ÑÑ.
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… â€” Â«Ğ¿Ğ¾ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸Â», Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ğ¼Ğ¸.

**Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚**: Ğ±Ğ°Ğ³Ğ¸ Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°ĞºÑˆĞµĞ½Ğµ, Ğ¿Ğ¾Ñ‚ĞµÑ€Ñ Ğ´Ğ¾Ğ²ĞµÑ€Ğ¸Ñ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ¾Ğ², Ñ€Ğ¾ÑÑ‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸.

---

## ğŸš€ Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ: APIOrchestra

**APIOrchestra** â€” Ğ²ĞµĞ±-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Java (Spring Boot) Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Python-ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ², ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ **Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ‚ĞµÑÑ‚Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹** Ğ½Ğ° Ğ¾ÑĞ½Ğ¾Ğ²Ğµ:

- **BPMN 2.0** â€” Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞ¾Ğ² (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€: Â«ĞÑ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ°Â»)
- **OpenAPI 3.0+** â€” ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¹ API-ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

> âœ… **ĞĞ¸ĞºĞ°ĞºĞ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°. Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñ‹. Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ½Ğ¾Ğ¿ĞºĞ° Â«Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒÂ».**

---


api-orchestra-complete/
â”œâ”€â”€ src/
â”‚ â”œâ”€â”€ main/
â”‚ â”‚ â”œâ”€â”€ java/
â”‚ â”‚ â”‚ â””â”€â”€ com/apiorchestra/Application.java
â”‚ â”‚ â””â”€â”€ resources/
â”‚ â”‚ â”œâ”€â”€ application.yml
â”‚ â”‚ â”œâ”€â”€ openapi.yaml
â”‚ â”‚ â””â”€â”€ process.bpmn
â”‚ â””â”€â”€ python/
â”‚ â””â”€â”€ virtual_bank_orchestrator.py
â”œâ”€â”€ pom.xml
â”œâ”€â”€ target/
â”‚ â””â”€â”€ api-orchestra-1.0.0.jar
â””â”€â”€ docs/
â”œâ”€â”€ video-script.md
â””â”€â”€ presentation.pdf


---

## ğŸ› ï¸ ĞšĞ°Ğº Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ (Ğ¾Ğ´Ğ½Ğ¸Ğ¼ ĞºĞ»Ğ¸ĞºĞ¾Ğ¼)

### ğŸ”§ Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹ Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸ ÑÑ‚Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

<details>
<summary>ğŸ“‹ ĞĞ°Ğ¶Ğ¼Ğ¸, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑÑ‘ â€” Java + Python + ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³Ğ¸</summary>

```bash
# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ¿Ğ°Ğ¿ĞºÑƒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
mkdir -p ~/api-orchestra && cd ~/api-orchestra

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ pom.xml
cat > pom.xml << 'EOF'
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>com.apiorchestra</groupId>
    <artifactId>api-orchestra</artifactId>
    <version>1.0.0</version>
    <packaging>jar</packaging>

    <properties>
        <maven.compiler.source>17</maven.compiler.source>
        <maven.compiler.target>17</maven.compiler.target>
        <spring.boot.version>3.2.0</spring.boot.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-dependencies</artifactId>
                <version>${spring.boot.version}</version>
                <type>pom</type>
                <scope>import</scope>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <dependencies>
        <!-- Spring Boot Starter Web -->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>

        <!-- Lombok -->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <scope>provided</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>repackage</goal>
                        </goals>
                        <configuration>
                            <mainClass>com.apiorchestra.Application</mainClass>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project>
EOF

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Application.java
mkdir -p src/main/java/com/apiorchestra
cat > src/main/java/com/apiorchestra/Application.java << 'EOF'
package com.apiorchestra;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.web.bind.annotation.*;
import org.springframework.web.multipart.MultipartFile;

import java.io.*;
import java.util.Map;

@SpringBootApplication
@RestController
public class Application {

    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @PostMapping("/api/run-test")
    public Map<String, Object> runTest(
            @RequestParam("bpmn") MultipartFile bpmnFile,
            @RequestParam("openapi") MultipartFile openApiFile) {

        try {
            File tempBpmn = File.createTempFile("bpmn_", ".bpmn");
            bpmnFile.transferTo(tempBpmn);

            File tempOpenApi = File.createTempFile("openapi_", ".yaml");
            openApiFile.transferTo(tempOpenApi);

            ProcessBuilder pb = new ProcessBuilder("python3", "virtual_bank_orchestrator.py");
            pb.environment().put("BPMN_PATH", tempBpmn.getAbsolutePath());
            pb.environment().put("OPENAPI_PATH", tempOpenApi.getAbsolutePath());

            Process process = pb.start();

            BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
            StringBuilder output = new StringBuilder();
            String line;
            while ((line = reader.readLine()) != null) {
                output.append(line).append("\n");
            }

            int exitCode = process.waitFor();

            return Map.of(
                    "status", "completed",
                    "exit_code", exitCode,
                    "output", output.toString()
            );

        } catch (Exception e) {
            e.printStackTrace();
            return Map.of(
                    "status", "error",
                    "message", e.getMessage()
            );
        }
    }
}
EOF

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ application.yml
mkdir -p src/main/resources
cat > src/main/resources/application.yml << 'EOF'
server:
  port: 8080

logging:
  level:
    com.apiorchestra: DEBUG
    org.springframework.web: INFO
EOF

# Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ openapi.yaml
cat > src/main/resources/openapi.yaml << 'EOF'
openapi: 3.0.3
info:
  title: Virtual Bank API
  version: 2.0
  description: API Ğ’Ğ¸Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ±Ğ°Ğ½ĞºĞ° Ğ´Ğ»Ñ Ñ…Ğ°ĞºĞ°Ñ‚Ğ¾Ğ½Ğ° "ĞÑ€ĞºĞµÑÑ‚Ñ€"
servers:
  - url: https://vbank.open.bankingapi.ru
    description: Sandbox environment

paths:
  /auth/bank-token:
    post:
      summary: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚Ğ¾ĞºĞµĞ½ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ°
      parameters:
        - name: client_id
          in: query
          required: true
          schema:
            type: string
            example: team111@app.hackaton.bankingapi.ru
        - name: client_secret
          in: query
          required: true
          schema:
            type: string
            example: Ib6tWUSQspi5YTLzkvSrTo18x0I2Wdq3
      responses:
        '200':
          description: Ğ£ÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚
          content:
            application/json:
              schema:
                type: object
                properties:
                  access_token:
                    type: string
                  token_type:
                    type: string
                  expires_in:
                    type: integer

  /account-consents/request:
    post:
      summary: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ³Ğ»Ğ°ÑĞ¸Ğµ Ğ½Ğ° Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº ÑÑ‡ĞµÑ‚Ğ°Ğ¼
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                client_id:
                  type: string
                  example: team111-01
                permissions:
                  type: array
                  items:
                    type: string
                  example: ["accounts", "balances", "transactions"]
                expire_time:
                  type: string
                  format: date-time
                  example: "2026-11-08T12:00:00Z"
      responses:
        '201':
          description: Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾
          content:
            application/json:
              schema:
                type: object
                properties:
                  consent_id:
                    type: string
                    example: "consent-12345"

  /accounts:
    get:
      summary: ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº ÑÑ‡ĞµÑ‚Ğ¾Ğ²
      parameters:
        - name: X-Consent-ID
          in: header
          required: true
          schema:
            type: string
            example: consent-12345
      responses:
        '200':
          description: Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ÑÑ‡ĞµÑ‚Ğ¾Ğ²
          content:
            application/json:
              schema:
                type: object
                properties:
                  accounts:
                    type: array
                    items:
                      type: object
                      properties:
                        account_id:
                          type: string
                        account_number:
                          type: string
                        currency:
                          type: string
                        status:
                          type: string
                        allowed_operations:
                          type: array
                          items:
                            type: string

  /payments:
    post:
      summary: Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                payment_id:
                  type: string
                  example: "pay-67890"
                amount:
                  type: string
                  example: "100.00"
                currency:
                  type: string
                  example: "RUB"
                consent_id:
                  type: string
                  example: "consent-12

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°
